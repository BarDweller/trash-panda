schemaVersion: 2.0.0
metadata:
  generateName: java-spring-boot
  version: 0.0.1
  description: Basic Java Spring Boot Stack
projects:
  - name: default
    git:
      location: 'https://github.com/BarDweller/trash-panda.git'
      sparseCheckoutDir: /unmanaged-app
      branch: master
  - name: galanthus-app
    git:
      location: 'https://github.com/BarDweller/trash-panda.git'
      sparseCheckoutDir: /galanthus-managed-app
      branch: master
  - name: stiletto-app
    git:
      location: 'https://github.com/BarDweller/trash-panda.git'
      sparseCheckoutDir: /stiletto-managed-app
      branch: master
components:
  - container:
      name: devcontainer
      image: registry.access.redhat.com/ubi8/openjdk-8
      memoryLimit: 768Mi
      mountSources: true
      sourceMapping: /projects
      endpoints:
        - name: 8080/tcp
          configuration:
            discoverable: false
            public: true
            protocol: tcp
            scheme: http
          targetPort: 8080
        - name: 8443/tcp
          configuration:
            discoverable: false
            public: true
            protocol: tcp
            scheme: https
          targetPort: 8443
commands:
  - exec:
      id: devBuild
      component: devcontainer
      workingDir: /projects
      commandLine: "mvn compile"
      group:
        kind: build 
        isDefault: true
  - exec:
      id: devRun
      component: devcontainer
      workingDir: /projects
      commandLine: "mvn spring-boot:run -Dmaven.test.skip=true"
      attributes:
        restart: "false"      
      group:
        kind: run 
        isDefault: true        
